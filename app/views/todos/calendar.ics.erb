BEGIN:VCALENDAR
PRODID:-//TRACKS//<%= TRACKS_VERSION %>//EN
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:Tracks
<% for todo in @due_all -%>
BEGIN:VEVENT
DTSTART;VALUE=DATE:<%= todo.due.strftime("%Y%m%d") %>
DTEND;VALUE=DATE:<%= (todo.due+1.day).strftime("%Y%m%d") %>
DTSTAMP:<%= todo.due.strftime("%Y%m%dT%H%M%SZ") %>
UID:<%= todo_url(todo) %>
CLASS:PUBLIC
CATEGORIES:Tracks
CREATED:<%= todo.created_at.strftime("%Y%m%dT%H%M%SZ") %>
DESCRIPTION:<%= format_ical_notes(todo.notes) %>
LAST-MODIFIED:<%= todo.due.strftime("%Y%m%dT%H%M%SZ") %>
LOCATION:
SEQUENCE:0
STATUS:CONFIRMED
SUMMARY:<%= todo.description %>
TRANSP:TRANSPARENT
END:VEVENT
<% end -%>
END:VCALENDAR